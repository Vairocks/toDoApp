{"ast":null,"code":"import React,{useState,useEffect}from'react';import TaskList from'../Components/TaskList';import AddTaskForm from'../Components/AddTaskForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const TodoApp=()=>{const[tasks,setTasks]=useState([]);const fetchTasks=async()=>{try{const response=await fetch('http://localhost:3000/api/gettasklist');if(response.ok){const data=await response.json();console.log(data[0]);setTasks(data);}else{console.error('Failed to fetch tasks:',response.statusText);}}catch(error){console.error('Failed to fetch tasks:',error);}};useEffect(()=>{fetchTasks();},[]);const addTask=()=>{fetchTasks();};const editTask=async(id,title,completed)=>{try{const response=await fetch(\"http://localhost:3000/api/edittask/\".concat(id),{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify({id,title,completed})// Send the updated data\n});if(response.ok){fetchTasks();}else{console.error('Failed to complete task:',response.statusText);}}catch(error){console.error('Failed to complete task:',error);}};const dropTask=async taskId=>{try{const response=await fetch(\"http://localhost:3000/api/droptask/\".concat(taskId),{method:'DELETE'});if(response.ok){setTasks(tasks.filter(task=>task.id!==taskId));}else{console.error('Failed to drop task:',response.statusText);}}catch(error){console.error('Failed to drop task:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-lg mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Todo List\"}),/*#__PURE__*/_jsx(AddTaskForm,{onAddTask:addTask}),/*#__PURE__*/_jsx(TaskList,{tasks:tasks,onComplete:editTask,onDrop:dropTask})]});};export default TodoApp;","map":{"version":3,"names":["React","useState","useEffect","TaskList","AddTaskForm","jsx","_jsx","jsxs","_jsxs","TodoApp","tasks","setTasks","fetchTasks","response","fetch","ok","data","json","console","log","error","statusText","addTask","editTask","id","title","completed","concat","method","headers","body","JSON","stringify","dropTask","taskId","filter","task","className","children","onAddTask","onComplete","onDrop"],"sources":["E:/zzz/toDoApp/todo-client/src/Pages/TodoApp.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport TaskList from '../Components/TaskList';\r\nimport AddTaskForm from '../Components/AddTaskForm';\r\n\r\n\r\nconst TodoApp = () => {\r\n  const [tasks, setTasks] = useState([]);\r\n\r\n  const fetchTasks = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:3000/api/gettasklist');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log(data[0]);\r\n        setTasks(data);\r\n      } else {\r\n        console.error('Failed to fetch tasks:', response.statusText);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch tasks:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTasks();\r\n  }, []);\r\n\r\n  const addTask = () => {\r\n    fetchTasks();\r\n  };\r\n\r\n  const editTask = async (id,title,completed) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:3000/api/edittask/${id}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body:JSON.stringify({ id,title,completed }) // Send the updated data\r\n      });\r\n      if (response.ok) {\r\n        fetchTasks();\r\n      } else {\r\n        console.error('Failed to complete task:', response.statusText);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to complete task:', error);\r\n    }\r\n  };\r\n  const dropTask = async (taskId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:3000/api/droptask/${taskId}`, {\r\n        method: 'DELETE',\r\n      });\r\n      if (response.ok) {\r\n        setTasks(tasks.filter((task) => task.id !== taskId));\r\n      } else {\r\n        console.error('Failed to drop task:', response.statusText);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to drop task:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-lg mx-auto p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Todo List</h1>\r\n      <AddTaskForm onAddTask={addTask} />\r\n      <TaskList tasks={tasks} onComplete={editTask} onDrop={dropTask} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TodoApp;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}